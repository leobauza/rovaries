!function(){angular.module("app",["ngRoute","ngResource","ngSanitize","btford.markdown","ngAnimate"])}(bootstrap),function(){angular.module("app")}(),function(a){var b=angular.module("app");b.config(["$routeProvider","$locationProvider",function(b,c){b.when("/",{templateUrl:a.tplsPath+"/home.html",controller:"HomeCtrl",resolve:{page:["Resolver",function(a){return a.get("/")}]}}).when("/philosophy",{templateUrl:a.tplsPath+"/philosophy.html",controller:"PhilCtrl",resolve:{page:["$routeParams","Resolver",function(a,b){return b.get("/philosophy")}]}}).when("/philosophy/:name",{templateUrl:a.tplsPath+"/philosophy.html",controller:"PhilCtrl",resolve:{page:["$routeParams","Resolver",function(a,b){return b.get("/philosophy")}]}}).when("/resume",{templateUrl:a.tplsPath+"/resume.html",controller:"ResumeCtrl",resolve:{page:["Resolver",function(a){return a.get("/resume")}]}}).when("/design",{templateUrl:a.tplsPath+"/projects.html",controller:"ProjectsCtrl",resolve:{page:["Resolver",function(a){return a.get("/design")}]}}).when("/ux",{templateUrl:a.tplsPath+"/projects.html",controller:"ProjectsCtrl",resolve:{page:["Resolver",function(a){return a.get("/ux")}]}}).when("/ux/:name",{templateUrl:a.tplsPath+"/project.html",controller:"ProjectCtrl",resolve:{page:["Resolver","$route",function(a,b){return a.getProject("/ux/"+b.current.params.name)}],project:["$route",function(b){return _.find(a.views.ux.ux_projects,function(a){return a.alias==="ux/"+b.current.params.name})}],data:[function(){return{total_projects:_.size(a.views.ux.ux_projects),base:"ux",view_name:"ux_projects"}}]}}).when("/design/:name",{templateUrl:a.tplsPath+"/project.html",controller:"ProjectCtrl",resolve:{page:["Resolver","$route",function(a,b){return a.getProject("/design/"+b.current.params.name)}],project:["$route",function(b){return _.find(a.views.design.design_projects,function(a){return a.alias==="design/"+b.current.params.name})}],data:[function(){return{total_projects:_.size(a.views.design.design_projects),base:"design",view_name:"design_projects"}}]}}).when("/home",{redirectTo:"/"}).otherwise({template:"doesn't exist"}),c.html5Mode(!0).hashPrefix("!")}]),b.run(["$rootScope","$location","$window",function(a,b,c){a.$on("$locationChangeStart",function(a,b){var d=b.split("/");(_.contains(d,"admin")||_.contains(d,"admin_menu"))&&(c.location.href=b)})}])}(bootstrap),function(){var a=angular.module("app");a.controller("HomeCtrl",["$scope","$location","page",function(a,b,c){var d=a.getNid(b.path());console.log(d),a.setSiteTitle("Home"),a.setNid(d),a.outputHtml=c.node.body.safe_value}])}(bootstrap),function(a){var b=angular.module("app");b.controller("MainCtrl",["$scope","$location","$rootScope","$timeout",function(b,c,d,e){d.siteTitle=a.siteTitle,d.siteName=a.siteTitle,b.setSiteTitle=function(b){d.siteTitle=a.siteTitle+" | "+b},b.contactBlurb=a.contactInfo.blurb,b.contactEmail=a.contactInfo.email,b.contactPhone=a.contactInfo.phone,b.links=a.menu.links,b.getNid=function(b){return link=_.find(a.menu.links,function(a){return a.path===b}).nid},b.getProjectNid=function(b,c,d){return _.find(a.views[b][c],function(a){return a.alias===b+"/"+d})},b.getNeighbourProject=function(b,c,d){return _.find(a.views[b][c],function(a){return a.pos===d})},b.setNid=function(a){b.nid=a},b.setPageTitle=function(a){b.page_title=a},b.$on("$routeChangeStart",function(){b.viewLoading=!0}),b.$on("$routeChangeSuccess",function(){e(function(){b.viewLoading=!1},1e3)})}])}(bootstrap),function(){var a=angular.module("app");a.controller("PhilCtrl",["$scope","$routeParams","page",function(a,b,c){var d=c.node,e=b.name||null,f=d.collections_fields,g=_.size(f);phil_boxes=d.collections_fields,si=1,groups={},i=0,gi=0,a.slider_philosophy=e,a.setNid(d.nid),a.setSiteTitle(d.title),a.setPageTitle(d.title),a.slider=_.map(f,function(a){return a.id=si,si+=1,a}),_.each(phil_boxes,function(a){i%3===0?gi+=1:gi=gi,groups[gi]=groups[gi]||{},groups[gi][i]=a,i+=1}),a.phil_groups=groups,a.compareToName=function(a){return e?e.toLowerCase()===a.toLowerCase():!0},a.getPrevSlide=function(b){return b-1===0?_.where(a.slider,{id:g}):_.where(a.slider,{id:b-1})},a.getNextSlide=function(b){return b+1>g?_.where(a.slider,{id:1}):_.where(a.slider,{id:b+1})}}])}(bootstrap),function(a){var b=angular.module("app");b.controller("ProjectCtrl",["$scope","$location","Page","page","project","data",function(b,c,d,e,f,g){var h=e.node.custom_fields,i=e.node.collections_fields,j=g.base,k=g.view_name,l=g.total_projects;b.setSiteTitle(e.node.title),b.setPageTitle(h.field_tags.taxonomy_term.name),b.prevProject=f.pos-1!==0?b.getNeighbourProject(j,k,f.pos-1):b.getNeighbourProject(j,k,l),b.nextProject=f.pos+1>l?b.getNeighbourProject(j,k,1):b.getNeighbourProject(j,k,f.pos+1),b.project_title=e.node.title,b.role=h.field_role.value,b.tag=h.field_tags.taxonomy_term.name,b.rows=i;var m=a.views[j][k],n={},o=0,p=0;_.each(m,function(a){o%3===0?p+=1:p=p,n[p]=n[p]||{},n[p][o]=a,o+=1}),b.groups=n,b.projects=m}])}(bootstrap),function(){var a=angular.module("app");a.controller("ProjectsCtrl",["$scope","$location","Page","$routeParams","page",function(a,b,c,d,e){var f=e.node.nid;if(a.setSiteTitle(e.node.title),a.setNid(f),e.views)var g=e.views.design_projects||e.views.ux_projects;else var g=null;var h={},i=0,j=0;_.each(g,function(a){i%3===0?j+=1:j=j,h[j]=h[j]||{},h[j][i]=a,i+=1}),a.groups=h,a.projects=g,a.setPageTitle(e.node.title)}])}(bootstrap),function(){var a=angular.module("app");a.controller("ResumeCtrl",["$scope","$location","Page","$rootScope","page",function(a,b,c,d,e){var f=e.node.composed_fields,g=e.node.custom_fields,h=e.node.nid;a.setSiteTitle(e.node.title),a.setPageTitle(e.node.title),a.setNid(h),a.experience=f.field_experience,a.schools=f.field_education,a.awards=f.field_awards,a.resume=g.field_resume,a.arbitrary_links=f.field_arbitrary_links}])}(bootstrap),function(a){var b=angular.module("app");b.directive("siteNav",function(){return{restrict:"E",templateUrl:a.tplsPath+"/site-nav.html",controller:["$location","$scope",function(a,b){b.changePage=function(){}}]}})}(bootstrap),function(){var a=angular.module("app");a.filter("unsafe",function(a){return function(b){return a.trustAsHtml(b)}})}(bootstrap),function(a){var b=angular.module("app");b.factory("Page",["$resource",function(a){return a("/api/page/:nid",{},{get:{cache:!0,method:"GET"}})}]),b.service("Resolver",["$http","$q",function(b,c){return this.get=function(d){var e,f=c.defer();return e=_.find(a.menu.links,function(a){return a.path===d}).nid,b.get("/api/page/"+e,{cache:!0}).success(function(a){f.resolve(a)}).error(function(a){f.reject(a)}),f.promise},this.getProject=function(d){var e,f=c.defer(),g=d,h=g.split("/")[1],i=h+"_projects",j=g.split("/")[2];return e=_.find(a.views[h][i],function(a){return a.alias===h+"/"+j}).nid,b.get("/api/page/"+e,{cache:!0}).success(function(a){f.resolve(a)}).error(function(a){f.reject(a)}),f.promise},this}])}(bootstrap);