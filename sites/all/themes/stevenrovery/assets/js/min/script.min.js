!function(){angular.module("app",["ngRoute","ngResource","ngSanitize","btford.markdown"])}(bootstrap),function(a){var b=angular.module("app");b.config(["$routeProvider","$locationProvider",function(b,c){b.when("/",{templateUrl:a.tplsPath+"/home.html",controller:"HomeCtrl"}).when("/philosophy",{templateUrl:a.tplsPath+"/philosophy.html",controller:"PhilCtrl"}).when("/philosophy/:name",{templateUrl:a.tplsPath+"/philosophy.html",controller:"PhilCtrl"}).when("/resume",{templateUrl:a.tplsPath+"/resume.html",controller:"ResumeCtrl"}).when("/design",{templateUrl:a.tplsPath+"/projects.html",controller:"ProjectsCtrl"}).when("/ux",{templateUrl:a.tplsPath+"/projects.html",controller:"ProjectsCtrl"}).when("/ux/:name",{templateUrl:a.tplsPath+"/project.html",controller:"ProjectCtrl"}).when("/design/:name",{templateUrl:a.tplsPath+"/project.html",controller:"ProjectCtrl"}).otherwise({template:"doesn't exist"}),c.html5Mode(!0).hashPrefix("!")}]),b.run(["$rootScope","$location","$window",function(a,b,c){a.$on("$locationChangeStart",function(a,b){var d=b.split("/");(_.contains(d,"admin")||_.contains(d,"admin_menu"))&&(c.location.href=b)})}])}(bootstrap),function(){var a=angular.module("app");a.controller("HomeCtrl",["$scope","$location","Page","$rootScope",function(a,b,c){var d=a.getNid(b.path());console.log(d),c.get({nid:d},function(b){a.setSiteTitle("Home"),a.setNid(d),a.outputHtml=b.node.body.safe_value})}])}(bootstrap),function(a){var b=angular.module("app");b.controller("MainCtrl",["$scope","$location","$rootScope",function(b,c,d){d.siteTitle=a.siteTitle,d.siteName=a.siteTitle,b.setSiteTitle=function(a){d.siteTitle=a},b.contactBlurb=a.contactInfo.blurb,b.contactEmail=a.contactInfo.email,b.contactPhone=a.contactInfo.phone,b.links=a.menu.links,b.getNid=function(b){return link=_.find(a.menu.links,function(a){return a.path===b}).nid},b.getProjectNid=function(b,c,d){return _.find(a.views[b][c],function(a){return a.alias===b+"/"+d})},b.getNeighbourProject=function(b,c,d){return _.find(a.views[b][c],function(a){return a.pos===d})},b.setNid=function(a){b.nid=a},b.setPageTitle=function(a){b.page_title=a}}])}(bootstrap),function(){var a=angular.module("app");a.controller("PhilCtrl",["$scope","$location","$routeParams","Page","$rootScope",function(a,b,c,d){var e=b.path(),f=e.split("/"),g=c.name||null,h=a.getNid("/"+f[1]);d.get({nid:h},function(b){a.setNid(h),a.setSiteTitle(b.node.title),a.setPageTitle(b.node.title),a.slider=b.node.composed_fields.field_philosophy_slider}),a.compareToName=function(a){return g?g.toLowerCase()===a.toLowerCase():!0}}])}(bootstrap),function(a){var b=angular.module("app");b.controller("ProjectCtrl",["$scope","$location","Page",function(b,c,d){var e=c.path(),f=e.split("/")[1],g=f+"_projects",h=e.split("/")[2],i=_.size(a.views[f][g]),j=b.getProjectNid(f,g,h),k=j.nid;b.setNid(k),b.base=f,d.get({nid:b.nid},function(c){var d=c.node.custom_fields,e=c.node.composed_fields;b.setSiteTitle(c.node.title),b.setPageTitle(d.field_tags.taxonomy_term.name),b.prevProject=j.pos-1!==0?b.getNeighbourProject(f,g,j.pos-1):b.getNeighbourProject(f,g,i),b.nextProject=j.pos+1>i?b.getNeighbourProject(f,g,1):b.getNeighbourProject(f,g,j.pos+1),b.project_title=c.node.title,b.role=d.field_role.value,b.tag=d.field_tags.taxonomy_term.name,b.rows=e.field_project_rows;var h=a.views[f][g],k={},l=0,m=0;_.each(h,function(a){l%3===0?m+=1:m=m,k[m]=k[m]||{},k[m][l]=a,l+=1}),b.groups=k,b.projects=h})}])}(bootstrap),function(){var a=angular.module("app");a.controller("ProjectsCtrl",["$scope","$location","Page","$routeParams",function(a,b,c){var d=b.path(),e=null;e=a.getNid(d),c.get({nid:e},function(b){if(a.setSiteTitle(b.node.title),a.setNid(e),b.views)var c=b.views.design_projects||b.views.ux_projects;else var c=null;var d={},f=0,g=0;_.each(c,function(a){f%3===0?g+=1:g=g,d[g]=d[g]||{},d[g][f]=a,f+=1}),a.groups=d,a.projects=c,a.setPageTitle(b.node.title)})}])}(bootstrap),function(){var a=angular.module("app");a.controller("ResumeCtrl",["$scope","$location","Page","$rootScope",function(a,b,c){var d=a.getNid(b.path());c.get({nid:d},function(b){var c=b.node.composed_fields,e=b.node.custom_fields;a.setSiteTitle(b.node.title),a.setPageTitle(b.node.title),a.setNid(d),a.experience=c.field_experience,a.schools=c.field_education,a.awards=c.field_awards,a.resume=e.field_resume,a.arbitrary_links=c.field_arbitrary_links})}])}(bootstrap),function(a){var b=angular.module("app");b.directive("siteNav",function(){return{restrict:"E",templateUrl:a.tplsPath+"/site-nav.html",controller:["$location","$scope",function(a,b){b.changePage=function(){}}]}})}(bootstrap),function(){var a=angular.module("app");a.filter("unsafe",function(a){return function(b){return a.trustAsHtml(b)}})}(bootstrap),function(){var a=angular.module("app");a.factory("Page",["$resource",function(a){return a("/api/page/:nid")}])}(bootstrap);